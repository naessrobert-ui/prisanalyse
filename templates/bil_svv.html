<!doctype html>
<html lang="nb">
<head>
  <meta charset="utf-8">
  <title>SVV kjøretøyoppslag – prisanalyse.no</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: "Montserrat", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px 16px 40px;

      color: #f9fafb;
      background:
        linear-gradient(rgba(0, 0, 0, 0.78), rgba(0, 0, 0, 0.88)),
        url('https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?q=80&w=1920') no-repeat center center fixed;
      background-size: cover;
    }

    .page {
      max-width: 1100px;
      width: 100%;
    }

    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .logo-line {
      font-size: 0.8rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      opacity: 0.85;
      color: #e5e7eb;
    }

    .back-link {
      color: #e5e7eb;
      text-decoration: none;
      opacity: 0.85;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .back-link span {
      font-size: 1.15rem;
      line-height: 1;
    }

    h1 {
      font-size: clamp(2.0rem, 3.2vw + 1rem, 2.6rem);
      font-weight: 700;
      margin-bottom: 4px;
    }

    h1 .highlight {
      color: #60a5fa;
    }

    .subtitle {
      color: #d1d5db;
      font-size: 0.98rem;
      margin-bottom: 20px;
    }

    main {
      margin-top: 8px;
    }

    /* Kort-stil – samme glass-look som forsiden */
    .card {
      border-radius: 18px;
      padding: 20px 18px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      background: radial-gradient(circle at top left, rgba(255,255,255,0.18), transparent 60%),
                  rgba(15, 23, 42, 0.65);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      box-shadow:
        0 18px 45px rgba(0, 0, 0, 0.65),
        inset 0 0 0 1px rgba(255, 255, 255, 0.04);
      margin-bottom: 16px;
    }

    .card h2 {
      font-size: 1.05rem;
      margin-bottom: 8px;
    }

    /* Grid med minst to kort i bredden */
    .two-col {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 16px;
      margin-bottom: 16px;
    }

    @media (max-width: 900px) {
      .two-col {
        grid-template-columns: 1fr;
      }
    }

    /* Form */
    form {
      display: flex;
      flex-wrap: wrap;
      gap: 0.6rem;
      align-items: center;
      margin-top: 6px;
    }

    input[type="text"] {
      flex: 1 1 220px;
      padding: 0.5rem 0.7rem;
      border-radius: 8px;
      border: 1px solid rgba(148, 163, 184, 0.9);
      font-size: 0.95rem;
      background: rgba(15,23,42,0.9);
      color: #e5e7eb;
      outline: none;
    }

    input[type="text"]::placeholder {
      color: #9ca3af;
    }

    button {
      padding: 0.55rem 1.2rem;
      border-radius: 999px;
      border: none;
      background: #3b82f6;
      color: white;
      font-size: 0.9rem;
      cursor: pointer;
      font-weight: 500;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    button:hover {
      background: #2563eb;
    }

    .helper-text {
      margin-top: 0.4rem;
      font-size: 0.8rem;
      color: #9ca3af;
    }

    .error {
      background: rgba(239, 68, 68, 0.12);
      color: #fecaca;
      border: 1px solid rgba(248, 113, 113, 0.8);
      border-radius: 10px;
      padding: 0.75rem 1rem;
      margin-top: 0.8rem;
      font-size: 0.9rem;
    }

    /* Definisjonslister (info-rader) */
    dl {
      display: grid;
      grid-template-columns: minmax(0, 200px) minmax(0, 1fr);
      row-gap: 0.22rem;
      column-gap: 1rem;
      margin: 0;
      font-size: 0.9rem;
    }

    dt {
      font-weight: 500;
      color: #cbd5f5;
    }

    dd {
      margin: 0;
      color: #f9fafb;
    }

    .badge {
      display: inline-block;
      padding: 3px 9px;
      border-radius: 999px;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      margin-left: 6px;
      border: 1px solid rgba(255,255,255,0.6);
      opacity: 0.9;
    }

    .badge-success {
      background: rgba(22,163,74,0.25);
      border-color: rgba(34,197,94,0.9);
      color: #bbf7d0;
    }

    .badge-warning {
      background: rgba(202,138,4,0.25);
      border-color: rgba(234,179,8,0.9);
      color: #fef9c3;
    }

    .badge-danger {
      background: rgba(220,38,38,0.28);
      border-color: rgba(248,113,113,0.9);
      color: #fee2e2;
    }

    .badge-neutral {
      background: rgba(148,163,184,0.25);
      border-color: rgba(148,163,184,0.9);
      color: #e5e7eb;
    }

    details {
      margin-top: 0.5rem;
    }

    details summary {
      cursor: pointer;
      font-size: 0.9rem;
      color: #cbd5f5;
      margin-bottom: 0.3rem;
    }

    pre {
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      padding: 1rem;
      border-radius: 10px;
      overflow-x: auto;
      font-size: 0.78rem;
      border: 1px solid rgba(55,65,81,0.9);
    }
  </style>
</head>
<body>
<div class="page">

  <div class="top-bar">
    <div class="logo-line">PRISANALYSE.NO</div>
    <a href="/bil" class="back-link"><span>←</span> Tilbake til bilanalyse</a>
  </div>

  <h1>Oppslag <span class="highlight">Statens vegvesen</span></h1>
  <div class="subtitle">
    Slå opp tekniske data, EU-kontroll og bruktimport direkte fra Statens vegvesen ved å bruke registreringsnummer eller VIN.
  </div>

  <main>
    <!-- Oppslag -->
    <div class="card">
      <h2>Oppslag</h2>
      <form method="post">
        <input type="text" name="identifier" placeholder="Reg.nr (f.eks. EE24350) eller VIN" required>
        <button type="submit">Slå opp</button>
      </form>
      <p class="helper-text">
        Bruk ordinært registreringsnummer eller understellsnummer. Personlige skilt (f.eks. RN) støttes ikke direkte,
        men vises i resultatet dersom bilen har det.
      </p>

      {% if error %}
        <div class="error">
          {{ error }}
        </div>
      {% endif %}
    </div>

    {% if flat %}
      <!-- Kjøretøy -->
      <div class="card">
        <h2>Kjøretøy</h2>
        <dl>
          <dt>Merke / modell</dt>
          <dd>
            {{ flat.svv_merke or "–" }}
            {% if flat.svv_handelsbetegnelse %} {{ flat.svv_handelsbetegnelse }}{% endif %}
          </dd>

          <dt>Typebetegnelse</dt>
          <dd>{{ flat.svv_typebetegnelse or "–" }}</dd>

          <dt>Kjøretøytype</dt>
          <dd>{{ flat.svv_kjoretoy_typebeskrivelse or "–" }}</dd>

          <dt>Reg.nr (ordinært)</dt>
          <dd>{{ flat.svv_kjennemerke_ordinart or "–" }}</dd>

          <dt>Personlig kjennemerke</dt>
          <dd>{{ flat.svv_kjennemerke_personlig or "Ingen" }}</dd>

          <dt>Alle kjennemerker (historikk)</dt>
          <dd>{{ flat.svv_kjennemerke_alle or "–" }}</dd>

          <dt>Understellsnummer (VIN)</dt>
          <dd>{{ flat.svv_vin or "–" }}</dd>
        </dl>
      </div>

      <!-- Bruktimport + EU-kontroll -->
      <div class="two-col">
        <div class="card">
          <h2>Bruktimport</h2>
          {% if flat.svv_bruktimportert %}
            <p style="margin-bottom:0.4rem;">
              Bruktimportert kjøretøy
              {% if flat.svv_importland_navn %}
                – importert fra {{ flat.svv_importland_navn }}
              {% endif %}
              <span class="badge badge-warning">Bruktimport</span>
            </p>
            <dl>
              <dt>Importland</dt>
              <dd>
                {{ flat.svv_importland_navn or "–" }}
                {% if flat.svv_importland_kode %} ({{ flat.svv_importland_kode }}){% endif %}
              </dd>

              <dt>Kilometerstand ved import</dt>
              <dd>
                {% if flat.svv_import_kilometerstand %}
                  {{ flat.svv_import_kilometerstand }} km
                {% else %}
                  –
                {% endif %}
              </dd>

              <dt>Utenlandsk reg.nr</dt>
              <dd>{{ flat.svv_import_tidligere_kjennemerke or "–" }}</dd>

              <dt>Utenlandsk vognkortnr</dt>
              <dd>{{ flat.svv_import_tidligere_vognkortnr or "–" }}</dd>

              <dt>Førstegangsregistrert i utlandet</dt>
              <dd>{{ flat.svv_forstegang_reg_dato_utland or "–" }}</dd>

              <dt>Fortollingsreferanse</dt>
              <dd>{{ flat.svv_fortolling_referanse or "–" }}</dd>

              <dt>Fortollingsbeskrivelse</dt>
              <dd>{{ flat.svv_fortolling_beskrivelse or "–" }}</dd>
            </dl>
          {% else %}
            <p>
              Ikke bruktimportert.
              <span class="badge badge-success">Norsk førstegangsregistrert</span>
            </p>
          {% endif %}
        </div>

        <div class="card">
          <h2>EU-kontroll</h2>
          <dl>
            <dt>Neste frist for EU-kontroll</dt>
            <dd>
              {% if flat.svv_kontrollfrist %}
                {{ flat.svv_kontrollfrist }}
                {% if eu_status == "utløpt" %}
                  <span class="badge badge-danger">Frist utløpt</span>
                {% elif eu_status == "snart" %}
                  <span class="badge badge-warning">Mindre enn 6 mnd igjen</span>
                {% elif eu_status == "ok" %}
                  <span class="badge badge-success">Mer enn 6 mnd igjen</span>
                {% else %}
                  <span class="badge badge-neutral">Ukjent status</span>
                {% endif %}
              {% else %}
                –
              {% endif %}
            </dd>

            <dt>Sist EU-godkjent</dt>
            <dd>{{ flat.svv_sist_eu_godkjent or "–" }}</dd>

            {% if eu_dager_igjen is not none %}
              <dt>Dager til frist</dt>
              <dd>
                {{ eu_dager_igjen }}
                {% if eu_dager_igjen < 0 %}(frist passert){% endif %}
              </dd>
            {% endif %}
          </dl>
        </div>
      </div>

      <!-- Tekniske data + Motor/miljø -->
      <div class="two-col">
        <div class="card">
          <h2>Tekniske data</h2>
          <dl>
            <dt>Lengde</dt>
            <dd>
              {% if flat.svv_lengde_mm %}{{ flat.svv_lengde_mm }} mm{% else %}–{% endif %}
            </dd>

            <dt>Bredde</dt>
            <dd>
              {% if flat.svv_bredde_mm %}{{ flat.svv_bredde_mm }} mm{% else %}–{% endif %}
            </dd>

            <dt>Høyde</dt>
            <dd>
              {% if flat.svv_hoyde_mm %}{{ flat.svv_hoyde_mm }} mm{% else %}–{% endif %}
            </dd>

            <dt>Egenvekt</dt>
            <dd>
              {% if flat.svv_egenvekt_kg %}{{ flat.svv_egenvekt_kg }} kg{% else %}–{% endif %}
            </dd>

            <dt>Nyttelast</dt>
            <dd>
              {% if flat.svv_nyttelast_kg %}{{ flat.svv_nyttelast_kg }} kg{% else %}–{% endif %}
            </dd>

            <dt>Tillatt totalvekt</dt>
            <dd>
              {% if flat.svv_tillatt_totalvekt_kg %}{{ flat.svv_tillatt_totalvekt_kg }} kg{% else %}–{% endif %}
            </dd>

            <dt>Tilhenger med brems</dt>
            <dd>
              {% if flat.svv_tillatt_tilhenger_med_brems_kg %}
                {{ flat.svv_tillatt_tilhenger_med_brems_kg }} kg
              {% else %}
                –
              {% endif %}
            </dd>

            <dt>Tilhenger uten brems</dt>
            <dd>
              {% if flat.svv_tillatt_tilhenger_uten_brems_kg %}
                {{ flat.svv_tillatt_tilhenger_uten_brems_kg }} kg
              {% else %}
                –
              {% endif %}
            </dd>

            <dt>Sitteplasser totalt</dt>
            <dd>{{ flat.svv_sitteplasser_totalt or "–" }}</dd>
          </dl>
        </div>

        <div class="card">
          <h2>Motor / drivstoff / miljø</h2>
          <dl>
            <dt>Drivstoff</dt>
            <dd>{{ flat.svv_drivstoff_navn or "–" }}</dd>

            <dt>Euroklasse</dt>
            <dd>{{ flat.svv_euroklasse or "–" }}</dd>

            <dt>Slagvolum</dt>
            <dd>
              {% if flat.svv_slagvolum_cm3 %}
                {{ flat.svv_slagvolum_cm3 }} cm³
              {% else %}
                –
              {% endif %}
            </dd>

            <dt>Maks netto effekt</dt>
            <dd>
              {% if flat.svv_maks_netto_effekt_kw %}
                {{ flat.svv_maks_netto_effekt_kw }} kW
              {% else %}
                –
              {% endif %}
            </dd>

            <dt>Motor-kode</dt>
            <dd>{{ flat.svv_motor_kode or "–" }}</dd>

            <dt>Forbruk blandet</dt>
            <dd>
              {% if flat.svv_forbruk_blandet_l_100km %}
                {{ flat.svv_forbruk_blandet_l_100km }} l/100km
              {% else %}
                –
              {% endif %}
            </dd>

            <dt>CO₂ blandet</dt>
            <dd>
              {% if flat.svv_co2_blandet_g_km %}
                {{ flat.svv_co2_blandet_g_km }} g/km
              {% else %}
                –
              {% endif %}
            </dd>
          </dl>
        </div>
      </div>

      <!-- Dekk og felg -->
      <div class="card">
        <h2>Dekk og felg</h2>
        <dl>
          <dt>Standard foran</dt>
          <dd>{{ flat.svv_dekk_standard_foran or "–" }}</dd>

          <dt>Standard bak</dt>
          <dd>{{ flat.svv_dekk_standard_bak or "–" }}</dd>

          <dt>Alle dekkdimensjoner (godkjent)</dt>
          <dd>{{ flat.svv_dekkdimensjoner_unike or "–" }}</dd>

          <dt>Alle kombinasjoner (rå tekst)</dt>
          <dd>{{ flat.svv_dekk_alle_kombinasjoner or "–" }}</dd>
        </dl>
      </div>

      {% if raw_json %}
        <div class="card">
          <h2>Rådata</h2>
          <details>
            <summary>Vis rå JSON fra SVV</summary>
            <pre>{{ raw_json }}</pre>
          </details>
        </div>
      {% endif %}
    {% endif %}
  </main>
</div>
</body>
</html>

